<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>My Home Page</title>
        <link rel="stylesheet" href="./style.css" > 
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,900" rel="stylesheet">
        <script type="module">
            import Carousel from './modules/Carousel.mjs'; 
            import Weather from './modules/Weather.mjs'; 
            import coronaInstance from './modules/CoronaCases.mjs'; 
        </script>
    </head>
   
        <body style="font-family: Arial;border: 0 none;">
            <div class="Carousel">
                <div id='MyWeather'>
                    <div id='weather'>
                        <b id="location"></b>
                        <span id="temp"></span>
                         <span id="description"></span>
                     </div>
                </div>

                <span id='coronaBtn'>
                    <img src='./images/virus.png' />
                </span>

                <div id="CoronaVirusStats">
                    
                    <div id='sortContent'> 
                      <div id='sortButtons'>
                          <ul>
                            <li><span id='sortText'>Sort by:</span></li>
                            <li><button id='cases' type="button" class="btn">cases</button></li>
                            <li><button id='deaths' type="button" class="btn">deaths</button></li>
                            <li><button id='test' type='button' class='btn'>test</button></li>
                          </ul>
                      </div>
                    </div>
                    <div id='CoronaLoader' class="loader" style="display: none"></div>
                </div>


                    <div id="slider">
                        <div id="slide1" class="slide">
                            <div class='slide-content'>
                                <span></span>
                            </div>
                        </div>
                    </div>
                <div id="arrow-right" class="arrow"></div>
            </div>

           
       
            <ul class="container">
                <li class="child" id="childA">A</li>
                <li class="child" id="childB">B</li>
                <li> <button id='swap'>
                    Swap positions
                  </button>
                </li>
            </ul>
             

              <script>
                  
                    const childA = document.querySelector('#childA');
                    const childB = document.querySelector('#childB');
                    const finalChildAStyle = { x: null, y: null, };
                    const finalChildBStyle = { x: null, y: null, };

                    let swapDone = false;
                    
                    document.querySelector('#swap').addEventListener('click', () => {
                        console.log('test swap');

                    if (swapDone === false) {
                        // add CSS property 'transition: transform ease-in 0.3s' for the animation
                        // if we do not use this, we simply get a quick switch of data from the two li
                        childA.classList.add('transition');
                        childB.classList.add('transition');

                        let childAClientRect = childA.getBoundingClientRect()
                        let childBClientRect = childB.getBoundingClientRect();
                        
                        finalChildAStyle.x = childA.getBoundingClientRect().left - childB.getBoundingClientRect().left;
                        finalChildAStyle.y = childB.getBoundingClientRect().top - childA.getBoundingClientRect().top;                        
                        finalChildBStyle.x = childB.getBoundingClientRect().left - childA.getBoundingClientRect().left;
                        finalChildBStyle.y = childA.getBoundingClientRect().top - childB.getBoundingClientRect().top;

                        console.log('a', childAClientRect);
                        console.log('b', childBClientRect);

                        console.log(finalChildAStyle);
                        console.log(finalChildBStyle);

                        // transform A -50 pixel down on the y-axis
                        childA.style.transform = `translate(${finalChildAStyle.x}px, ${finalChildAStyle.y}px)`;

                        // transform B 50 pixels up on the y-axis
                        childB.style.transform = `translate(${finalChildBStyle.x}px, ${finalChildBStyle.y}px)`;
                    
                        // done once
                        // if we do not use 
                        setTimeout(() => {

                            // we need to do the actual movement of the two li. 
                            // if this is not put here, all we see is animation of b going up and a doing down.
                            // then, it will flash back to a on top, and b on bottom.
                            // By doing this, we finisht the animation with the correct placements of these two li.
                            document.querySelector('.container').insertBefore(childB, childA);

                            // clear the usage of using CSS 'transform ease-in 0.3s' for the animation
                            childA.classList.remove('transition');
                            childB.classList.remove('transition');

                            // clear the transfrom from style
                            childB.removeAttribute('style');
                            childA.removeAttribute('style');
                        }, 300);
                    }
                    swapDone = true;
                    });
                    
              </script>
        </body>
</html>
